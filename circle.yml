general:
  artifacts:
    - "coverage"

dependencies:
  cache_directories:
    - "node_modules"
  override:
    - npm install
    - npm prune

test:
  pre:
    - npm install typescript -g
    - npm run build
  override:
    - npm test
    - MOCHA_FILE=$CIRCLE_TEST_REPORTS/test-results.xml npm run coverage -- "--reporter" "mocha-junit-reporter"
